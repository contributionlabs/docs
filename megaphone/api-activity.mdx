---
title: "API Activity"
description: "How to integrate custom API activity into your campaign."
---

# 🤝 Third-party activity integration

<Note>
  Although Megaphone supports many first-party quests, there are non-standard quests and verifications that require a custom third-party API integration. This guide explains how you can integrate a custom third-party API to power custom onchain checks, in-app integrations, etc.
</Note>

### 🔑 Auth

Your API endpoint should not require any auth and should be an open API endpoint. In the future, we plan to allow custom headers required for the API (ex: API keys).

### 🎟️ Input/request from Megaphone to your API

<Tip>
  Whenever a Megaphone campaign user verifies doing an activity on your Megaphone page, our backend will make a request to your open API endpoint using your specific query key identity type.
</Tip>

**URL**: `https://<endpoint>/<path>?<queryParamKey?=<queryParamValue>>`

- `<endpoint>/<path>`: your base API endpoint
- `<queryParamKey?><queryParamValue>`: identity-specific static query params. Supported queryParams are `evmAddress` and `emailAddress`. If you would like other identity options, please request them on our [public Megaphone roadmap](https://megaphone.canny.io/).

  <Danger>
    For evm address, we normalize the string to lowercase. Make sure that your endpoint supports lookup by lowercase address to prevent issues!
  </Danger>
  - `evmAddress`:  `evmAddress=0xd8da6bf26964af9d7eed9e03e53415d37aa96045`
  - `emailAddress`: `emailAddress=vitalik@buterin.com`

**Example requests**

`evmAddress`

```
https://api.example.com/v1/verify?&evmAddress=0xd8da6bf26964af9d7eed9e03e53415d37aa96045
```

`emailAddress`

```
https://api.example.com/v1/verify?&emailAddress=vitalik@buterin.com
```

### 🚪 Expected Output / Response from your API

<Warning>
  We expect a particular response format from your open API endpoint. We will
  throw a 500 error if we detect any response that doesn’t conform to the below
  format.
</Warning>

**Response Schema**

```json
type ThirdPartyApiResonse = {
  status: "eligible";
  points?: number; // If not provided, we will default to 0
} | {
  status: "ineligible";
} |
{
  status: "error";
  message: string;
}
```

Megaphone expects these status codes to be returned from your api endpoint for different response types:

- status: `eligible` — `200`
- status: `ineligible` — `200`
- status `error`
  - `4xx` if Megaphone made a bad request
  - `5xx` if your API service is unavailable

**Example (Eligible)**

HTTP Status: `200`

```json
{
  "status": "eligible",
  "points": 100
}
```

**Example (Ineligible)**

HTTP Status: `200`

```json
{
  "status": "ineligible"
}
```

**Example (Error)**

HTTP Status: `4xx`

```json
{
  "status": "error",
  "message": "Invalid query param."
}
```

# ❓ FAQ

<Accordion title="What happens when a user is marked ineligible?">
  You can let us know if you want:

  `(A) users who are ineligible to be handled as receiving “0” points and completing the activity`

  OR

  `(B) users who are ineligible will temporarily fail the activity and then will be allowed to retry the activity after a cooldown period`

  We will configure the appropriate behavior on the Megaphone platform side.
</Accordion>